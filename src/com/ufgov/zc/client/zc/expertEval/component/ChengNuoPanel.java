/**   * @(#) project: ZFCG_XA* @(#) file: chengNuoPanel.java* * Copyright 2011 UFGOV, Inc. All rights reserved.* UFGOV PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.* */package com.ufgov.zc.client.zc.expertEval.component;import java.awt.BorderLayout;import java.awt.Color;import java.awt.Dimension;import java.awt.FlowLayout;import java.awt.Font;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.text.SimpleDateFormat;import java.util.Date;import javax.swing.BorderFactory;import javax.swing.JCheckBox;import javax.swing.JDialog;import javax.swing.JFrame;import javax.swing.JLabel;import javax.swing.JPanel;import javax.swing.JScrollPane;import javax.swing.JToolBar;import javax.swing.SwingConstants;import javax.swing.SwingUtilities;import javax.swing.UIManager;import javax.swing.border.TitledBorder;import com.ufgov.smartclient.plaf.BlueLookAndFeel;import com.ufgov.zc.client.common.WorkEnv;import com.ufgov.zc.client.component.button.AgreeButton;import com.ufgov.zc.client.component.button.DisagreeButton;import com.ufgov.zc.client.zc.expertEval.Constants;import com.ufgov.zc.client.zc.expertEval.evalPanel.ZcEbEvalPackListPanel;import com.ufgov.zc.common.system.RequestMeta;import com.ufgov.zc.common.zc.model.ZcEbExpertChengNuo;/*** @ClassName: chengNuoPanel* @Description: 专家承诺* @date: 2011-9-21 下午05:10:51* @version: V1.0 * @since: 1.0* @author: fanpl* @modify: */public class ChengNuoPanel extends JPanel {  private JLabel label = new JLabel();  private JPanel bottomPanel = new JPanel();  private JToolBar bottomToolBar = new JToolBar();  AgreeButton greeButton = new AgreeButton();  public ZcEbExpertChengNuo getExpertChengNuo() {    return expertChengNuo;  }  public void setExpertChengNuo(ZcEbExpertChengNuo expertChengNuo) {    this.expertChengNuo = expertChengNuo;  }  DisagreeButton disAgreeButton = new DisagreeButton();  private SimpleDateFormat df = new SimpleDateFormat("yyyy年MM月dd日");  private ZcEbExpertChengNuo expertChengNuo;  private RequestMeta requestMeta = WorkEnv.getInstance().getRequestMeta();  private ZcEbEvalPackListPanel listPanel;  private JDialog parentDialog;  public ChengNuoPanel(ZcEbExpertChengNuo expertChengNuo, ZcEbEvalPackListPanel listPanel, JDialog parentDialog) {    super();    setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), "政府采购评审专家拒绝政府采购领域商业贿赂承诺书", TitledBorder.CENTER,    TitledBorder.TOP, new Font("宋体", Font.BOLD, 15), Color.BLUE));    this.listPanel = listPanel;    this.expertChengNuo = expertChengNuo;    this.parentDialog = parentDialog;    this.setSize(50, 80);    this.setMaximumSize(new Dimension(50, 80));    refreshNeiRongTextArea(expertChengNuo);    refreshBottomPanel();    this.setLayout(new BorderLayout());    JScrollPane js = new JScrollPane(label);    this.add(js, BorderLayout.CENTER);    this.add(bottomToolBar, BorderLayout.SOUTH);  }  public ChengNuoPanel() {    super();    setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), "政府采购评审专家拒绝政府采购领域商业贿赂承诺书", TitledBorder.CENTER,    TitledBorder.TOP, new Font("宋体", Font.BOLD, 15), Color.BLUE));    refreshNeiRongTextArea(expertChengNuo);    refreshBottomPanel();    this.setLayout(new BorderLayout());    JScrollPane js = new JScrollPane(label);    this.add(js, BorderLayout.CENTER);    this.add(bottomToolBar, BorderLayout.SOUTH);  }  private void refreshBottomPanel() {    final JCheckBox jb = new JCheckBox("我已阅读承诺书", false);    jb.addActionListener(new ActionListener() {      public void actionPerformed(ActionEvent e) {        checkBoxActionPerformed(jb);      }    });    bottomToolBar.setLayout(new FlowLayout(FlowLayout.CENTER, 0, 0));    bottomToolBar.add(jb);    bottomToolBar.add(greeButton);    //    bottomToolBar.add(disAgreeButton);    greeButton.setVisible(false);    disAgreeButton.setVisible(false);    greeButton.addActionListener(new ActionListener() {      public void actionPerformed(ActionEvent e) {        doAgree(true);      }    });    disAgreeButton.addActionListener(new ActionListener() {      public void actionPerformed(ActionEvent e) {        // 保存        doAgree(false);      }    });    bottomPanel.add(bottomToolBar);  }  private void doAgree(boolean isAgree) {    expertChengNuo.setChengNuoDate(new Date());    if (isAgree) {      expertChengNuo.setChengNuo("Y");    } else {      expertChengNuo.setChengNuo("N");    }    listPanel.zcEbEvalServiceDelegate.saveZcExpertChengNuo(expertChengNuo, requestMeta);    if (isAgree) {      parentDialog.dispose();    }  }  private void checkBoxActionPerformed(JCheckBox jb) {    greeButton.setVisible(jb.isSelected());    //    disAgreeButton.setVisible(jb.isSelected());  }  private void refreshNeiRongTextArea(ZcEbExpertChengNuo expertChengNuo) {    label.setHorizontalAlignment(SwingConstants.LEFT);    label.setVerticalAlignment(SwingConstants.NORTH);    StringBuffer buffer = new StringBuffer();    buffer.append(Constants.CHENGNUO_CONTENT);    //    buffer.append("<html>" + expertChengNuo.getExpertName());    buffer.append(expertChengNuo.getExpertName());    buffer.append("<P align=right>日期：<u>");    buffer.append(df.format(new Date()));    buffer.append("</u></p>");    buffer.append("</body>");    buffer.append("</html>\n");    label.setText(buffer.toString());    //    neiRongLabel.setLineWrap(true);    label.setAutoscrolls(true);    label.setForeground(Color.DARK_GRAY);    label.setFont(new Font("宋体", Font.BOLD, 15));  }  public static void main(String[] args) throws Exception {    SwingUtilities.invokeLater(new Runnable() {      public void run() {        try {          //UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());          UIManager.setLookAndFeel(new BlueLookAndFeel());        } catch (Exception e) {          e.printStackTrace();        }        ChengNuoPanel bill = new ChengNuoPanel();        JFrame frame = new JFrame("frame");        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        frame.setSize(800, 600);        frame.setLocationRelativeTo(null);        frame.getContentPane().add(bill);        frame.setVisible(true);      }    });  }}