package com.ufgov.zc.client.zc.projectsupervision;import com.ufgov.zc.client.common.BillElementMeta;import com.ufgov.zc.client.common.ListCursor;import com.ufgov.zc.client.common.WorkEnv;import com.ufgov.zc.client.component.GkBaseDialog;import com.ufgov.zc.client.component.JFuncToolBar;import com.ufgov.zc.client.component.button.AntiFinishItemButton;import com.ufgov.zc.client.component.button.BlankOutButton;import com.ufgov.zc.client.component.button.CarryDownButton;import com.ufgov.zc.client.component.button.FinishItemButton;import com.ufgov.zc.client.component.button.HelpButton;import com.ufgov.zc.client.zc.zcppromake.ZcPProMakeEditPanel;import com.ufgov.zc.common.commonbiz.model.WfAware;import com.ufgov.zc.common.system.RequestMeta;import com.ufgov.zc.common.system.dto.ElementConditionDto;import com.ufgov.zc.common.zc.model.ZcPProMake;import com.ufgov.zc.common.zc.model.ZcProjectSupervision;import com.ufgov.zc.common.zc.publish.IZcPProMakeServiceDelegate;import java.awt.Color;import java.awt.Font;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import javax.swing.BorderFactory;import javax.swing.border.TitledBorder;import org.apache.log4j.Logger;public class ZcEbProjectSupervisionEditPanel extends ZcPProMakeEditPanel {  private static final long serialVersionUID = -2779110682087878491L;  private static final Logger logger = Logger.getLogger(ZcEbProjectSupervisionEditPanel.class);  private RequestMeta requestMeta = WorkEnv.getInstance().getRequestMeta();  private String compoId = "ZC_EB_PROJECT_SUPERVISION";  private HelpButton helpButton = new HelpButton();  private CarryDownButton carryDownButton = new CarryDownButton();  private FinishItemButton finishItemButton = new FinishItemButton();  private AntiFinishItemButton antiFinishItemButton = new AntiFinishItemButton();  private BlankOutButton blankOutButton = new BlankOutButton();  private ZcEbProjectSupervisionListPanel listPanel;  private ZcProjectSupervision ps = new ZcProjectSupervision();  private ZcPProMake zcPProMake;  public ZcEbProjectSupervisionEditPanel(GkBaseDialog parent, ListCursor listCursor, String tabStatus,  ZcEbProjectSupervisionListPanel listPanel) {    super(ZcPProMake.class, BillElementMeta.getBillElementMetaWithoutNd("ZC_P_PRO_MAKE"));    this.listCursor = listCursor;    this.listPanel = listPanel;    this.zcPProMake = (ZcPProMake) listCursor.getCurrentObject();    this.ps.setZcPProMake(zcPProMake);    this.workPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), "项目监管",    TitledBorder.CENTER, TitledBorder.TOP, new Font("宋体", Font.BOLD, 15), Color.BLUE));    this.colCount = 3;    init();    requestMeta.setCompoId(compoId);    refreshData();  }  protected IZcPProMakeServiceDelegate getZcPProMakeServiceDelegate() {    return this.listPanel.getZcPProMakeServiceDelegate();  }  @Override  public void initToolBar(JFuncToolBar toolBar) {    toolBar.setModuleCode("ZC");    toolBar.setCompoId(compoId);    toolBar.add(carryDownButton);    toolBar.add(finishItemButton);    toolBar.add(antiFinishItemButton);    toolBar.add(blankOutButton);    toolBar.add(helpButton);    setButtonStatus(ps, requestMeta, listCursor);    blankOutButton.addActionListener(new ActionListener() {      @Override      public void actionPerformed(ActionEvent e) {        ps.getZcPProMake().setZcMakeStatus("cancel");        listPanel.getZcEbProjectSupervisionServiceDelegate().blankOut(ps, requestMeta);        setButtonStatus(ps, requestMeta, listCursor);        setEditingObject(ps.getZcPProMake());        listPanel.refreshCurrentTabData();      }    });    carryDownButton.addActionListener(new ActionListener() {      @Override      public void actionPerformed(ActionEvent e) {        ps.getZcPProMake().setZcMakeStatus("yjz");        listPanel.getZcEbProjectSupervisionServiceDelegate().carryDown(ps, requestMeta);        setButtonStatus(ps, requestMeta, listCursor);        setEditingObject(ps.getZcPProMake());        listPanel.refreshCurrentTabData();      }    });    finishItemButton.addActionListener(new ActionListener() {      @Override      public void actionPerformed(ActionEvent e) {        ps.getZcPProMake().setZcMakeStatus("yjx");        listPanel.getZcEbProjectSupervisionServiceDelegate().update(ps, requestMeta);        setButtonStatus(ps, requestMeta, listCursor);        setEditingObject(ps.getZcPProMake());        listPanel.refreshCurrentTabData();      }    });    antiFinishItemButton.addActionListener(new ActionListener() {      @Override      public void actionPerformed(ActionEvent e) {        ps.getZcPProMake().setZcMakeStatus("exec");        listPanel.getZcEbProjectSupervisionServiceDelegate().update(ps, requestMeta);        setButtonStatus(ps, requestMeta, listCursor);        setEditingObject(ps.getZcPProMake());        listPanel.refreshCurrentTabData();      }    });  }  @Override  protected void setButtonStatus(WfAware baseBill, RequestMeta requestMeta, ListCursor listCursor) {    setButtonStatusUnvisible();    if (ps.getZcPProMake().getZcMakeStatus().equals("yjz")    || ps.getZcPProMake().getZcMakeStatus().equals("cancel")) {    } else if (ps.getZcPProMake().getZcMakeStatus().equals("exec")) {      finishItemButton.setVisible(true);      carryDownButton.setVisible(true);      blankOutButton.setVisible(true);    } else if (ps.getZcPProMake().getZcMakeStatus().equals("yjx")) {      antiFinishItemButton.setVisible(true);      blankOutButton.setVisible(true);    } else {      blankOutButton.setVisible(true);    }  }  private void setButtonStatusUnvisible() {    carryDownButton.setVisible(false);    finishItemButton.setVisible(false);    antiFinishItemButton.setVisible(false);    blankOutButton.setVisible(false);  }  public ZcProjectSupervision getZcProjectSupervision(String makeCode) {    ElementConditionDto dto = new ElementConditionDto();    dto.setManageCode(makeCode);    return (ZcProjectSupervision) listPanel.getZcEbProjectSupervisionServiceDelegate().getModelList(dto,    requestMeta).get(0);  }}