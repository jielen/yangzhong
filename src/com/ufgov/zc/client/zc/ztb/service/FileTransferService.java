package com.ufgov.zc.client.zc.ztb.service;import com.ufgov.zc.client.zc.ztb.dao.AsFileDao;import com.ufgov.zc.client.zc.ztb.model.SmartTreeNode;import com.ufgov.zc.common.zc.model.ZcZBFileTemplate;import java.io.File;import java.io.FileInputStream;import java.util.Map;public class FileTransferService {  private AsFileDao asFileDao = AsFileDao.getInstance();  /**   * 上传ztb文件   *   * @param currNode   * @param ztbPath   * @throws Exception   */  public String uploadZbFile(SmartTreeNode projNode, String ztbPath) throws Exception {    Map result = asFileDao.uploadFile(projNode.getNodeCode(), projNode.getNodeName(), ztbPath);    if (!"success".equals(result.get("UPDATESTATUS"))) {      throw new Exception((String) result.get("FAILREASON"));    }    return "success";  }  /**   * 上传ztb文件   *   * @param currNode   * @param ztbPath   * @throws Exception   */  public String uploadZbFile(String projCode, String projName, String ztbPath) throws Exception {    Map result = asFileDao.uploadFile(projCode, projName, ztbPath);    if (!"success".equals(result.get("UPDATESTATUS"))) {      throw new Exception((String) result.get("FAILREASON"));    }    return "success";  }  /**   * 上传ztb文件   *   * @param currNode   * @param ztbPath   * @throws Exception   */  public String uploadTemplateFile(SmartTreeNode projNode, String ztbPath, ZcZBFileTemplate template) throws Exception {    String iploadTemplateFileMessage = asFileDao.uploadTemplateFile(projNode, ztbPath, template);    return iploadTemplateFileMessage;  }  public Map<String, String> uploadEcbjFile(Map map) throws Exception {    String filePath = (String) map.get("FILEFULLPATH");    byte[] buff = new byte[(int) (new File(filePath)).length()];    FileInputStream fis = new FileInputStream(filePath);    int len = fis.read(buff);    fis.close();    map.put("FILECONTENT", buff);    return asFileDao.uploadEcbjFile(map);  }}