/**   * @(#) project: ZC* @(#) file: ZcEbEvalScoreItemEditPanel.java* * Copyright 2010 UFGOV, Inc. All rights reserved.* UFGOV PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.* */package com.ufgov.zc.client.zc.eval;import java.awt.event.KeyAdapter;import java.awt.event.KeyEvent;import java.util.ArrayList;import java.util.Date;import java.util.List;import com.ufgov.zc.client.common.LangTransMeta;import com.ufgov.zc.client.component.ui.fieldeditor.AbstractFieldEditor;import com.ufgov.zc.client.component.zc.fieldeditor.MoneyFieldEditor;import com.ufgov.zc.common.system.constants.ZcElementConstants;import com.ufgov.zc.common.zc.model.ZcEbEvalItemResult;/*** @ClassName: ZcEbEvalScoreItemEditPanel* @Description: TODO(这里用一句话描述这个类的作用)* @date: 2010-12-10 下午08:54:09* @version: V1.0 * @since: 1.0* @author: fanpl* @modify: */public class ZcEbEvalScoreItemEditPanel extends ZcEbEvalItemEditPanel {  private ZcEbEvalScoreItemEditPanel self = this;  private MoneyFieldEditor expertEvalScore;  public ZcEbEvalScoreItemEditPanel() {    super();  }  public List<AbstractFieldEditor> createFieldEditors() {    List<AbstractFieldEditor> editorList = new ArrayList<AbstractFieldEditor>();    //    TextFieldEditor editor0 = new TextFieldEditor(LangTransMeta.translate(ZcElementConstants.FIELD_TRANS_ZC_EB_FORMULA_ITEM_NAME), "itemName");    //    editorList.add(editor0);    //    editor0.setEnabled(false);    //    //    DateFieldEditor evalDate = new DateFieldEditor(LangTransMeta.translate(ZcElementConstants.FIELD_TRANS_ZC_FIELD_EVAL_TIME), "evalDate");    //    editorList.add(evalDate);    //    evalDate.setEnabled(false);    //    TextFieldEditor evalExpert = new TextFieldEditor(LangTransMeta.translate(ZcElementConstants.FIELD_TRANS_ZC_FIELD_EXPERT_NAME), "evalExpert");    //    editorList.add(evalExpert);    //    evalExpert.setEnabled(false);    MoneyFieldEditor standardScore = new MoneyFieldEditor(LangTransMeta.translate(ZcElementConstants.FIELD_TRANS_ZC_EB_FORMULA_ITEM_STANDARD_SCORE),    "standardScore");    editorList.add(standardScore);    standardScore.setEnabled(false);    expertEvalScore = new MoneyFieldEditor("专家评审分值", "expertEvalScore");    editorList.add(expertEvalScore);    expertEvalScore.setEnabled(true);    //    TextAreaFieldEditor formulaEdit = new TextAreaFieldEditor(LangTransMeta.translate(ZcElementConstants.FIELD_TRANS_ZC_EB_FORMULA_ITEM_FORMULA),    //      "formula");    //    editorList.add(formulaEdit);    //    formulaEdit.setEnabled(false);    //    TextAreaFieldEditor descEdit = new TextAreaFieldEditor(LangTransMeta.translate(ZcElementConstants.FIELD_TRANS_ZC_EB_FORMULA_ITEM_DESCRIPTION),    //      "description");    //    editorList.add(descEdit);    //    descEdit.setEnabled(false);    return editorList;  }  //评标的分值修改了之后，逐级修改上级评分的结果  private void updateParentRes(ZcEbEvalItemResult itemResult) {    ZcEbEvalItemResult parentItemResult = itemResult.getParentEvalItemResult();    parentItemResult.updateEvalResult();    parentItemResult.setEvalDate(new Date());    if (parentItemResult.getParentItemCode() != null) {      updateParentRes(parentItemResult);    }  }  public void setEditAble() {    if (this.getEditingObject() != null && ((ZcEbEvalItemResult) this.getEditingObject()).getFormula() != null) {      expertEvalScore.setEnabled(false);    } else {      expertEvalScore.setEnabled(true);    }  }  public void addListener() {    expertEvalScore.addKeyListener(new KeyAdapter() {      public void keyTyped(KeyEvent e) {        if (expertEvalScore.getValue() != null) {          ZcEbEvalItemResult parentItemResult = (ZcEbEvalItemResult) getEditingObject();          updateParentRes(parentItemResult);        }        super.keyTyped(e);      }    });  }}