package com.ufgov.zc.client.zc.zcxmcght;import java.util.List;import javax.swing.JOptionPane;import javax.swing.JPanel;import javax.swing.JTable;import javax.swing.table.TableModel;import com.ufgov.zc.client.common.MyTableModel;import com.ufgov.zc.client.component.JTablePanel;import com.ufgov.zc.client.component.table.BeanTableModel;import com.ufgov.zc.client.datacache.AsValDataCache;import com.ufgov.zc.common.system.dto.ElementConditionDto;import com.ufgov.zc.common.zc.foreignentity.IForeignEntityHandler;import com.ufgov.zc.common.zc.model.ZcPProMitemBi;import com.ufgov.zc.common.zc.model.ZcXmcgHtBi;/* * 指标余额外部实体 */public class ZcVBiDetailHandler implements IForeignEntityHandler {  private String columNames[];  private JTablePanel biTablePanel;  private JPanel selfPanel;  public ZcVBiDetailHandler(String columNames[], JTablePanel biTablePanel, JPanel selfPanel) {    this.columNames = columNames;    this.biTablePanel = biTablePanel;    this.selfPanel = selfPanel;  }  public void excute(List selectedDatas) {    // TODO Auto-generated method stub    JTable table = biTablePanel.getTable();    BeanTableModel model = (BeanTableModel) table.getModel();    int k = table.getSelectedRow();    if (k < 0)      return;    int k2 = table.convertRowIndexToModel(k);    ZcXmcgHtBi item = (ZcXmcgHtBi) (model.getBean(k2));    if (selectedDatas.size() > 0) {      ZcPProMitemBi detail = (ZcPProMitemBi) selectedDatas.get(0);      item.setZcBiNo(detail.getZcBiNo());      item.getZcPProMitemBi().setZcBiJhuaSum(detail.getZcBiJhuaSum());      item.getZcPProMitemBi().setZcBiUsedSum(detail.getZcBiUsedSum());      item.getZcPProMitemBi().setZcBiDoSum(detail.getZcBiDoSum());      item.getZcPProMitemBi().setFundCode(detail.getFundCode());      item.getZcPProMitemBi().setOriginCode(detail.getOriginCode());      item.getZcPProMitemBi().setPaytypeCode(detail.getPaytypeCode());      item.getZcPProMitemBi().setPaytypeName(detail.getPaytypeName());      item.getZcPProMitemBi().setSenddocCode(detail.getSenddocCode());      item.getZcPProMitemBi().setSenddocName(detail.getSenddocName());      item.setZcProBiSeq(detail.getZcProBiSeq());            item.setZcUseBiId(detail.getZcUseBiId());    }    model.fireTableDataChanged();  }  @Override  public TableModel createTableModel(List showDatas) {    Object data[][] = new Object[showDatas.size()][columNames.length];    for (int i = 0; i < showDatas.size(); i++) {      ZcPProMitemBi rowData = (ZcPProMitemBi) showDatas.get(i);      int col = 0;      data[i][col++] = rowData.getZcBiNo();      data[i][col++] = rowData.getZcBiJhuaSum();      data[i][col++] = AsValDataCache.getName("ZC_VS_FUND_NAME", rowData.getFundCode());      data[i][col++] = AsValDataCache.getName("ZC_VS_ORIGIN_NAME", rowData.getOriginCode());      data[i][col++] = AsValDataCache.getName("ZC_VS_PAYTYPE_NAME", rowData.getPaytypeCode());    }    MyTableModel model = new MyTableModel(data, columNames) {      public boolean isCellEditable(int row, int colum) {        return false;      }    };    return model;  }  @Override  public boolean isMultipleSelect() {    return false;  }  public boolean beforeSelect(ElementConditionDto dto) {    if (dto.getZcText0() == null || "".equals(dto.getZcText0())) {      JOptionPane.showMessageDialog(selfPanel, "请先选择项目代码！", "提示", JOptionPane.ERROR_MESSAGE);      return false;    } else      return true;  }}