package com.ufgov.zc.client.zc.bulletin;import java.util.Date;import java.util.List;import com.ufgov.zc.client.common.ListCursor;import com.ufgov.zc.client.component.zc.fieldeditor.DateFieldEditor;import com.ufgov.zc.common.system.constants.ZcSettingConstants;import com.ufgov.zc.common.zc.ZcEbBulletinConstants;import com.ufgov.zc.common.zc.model.ZcEbBulletin;import com.ufgov.zc.common.zc.model.ZcEbPack;import com.ufgov.zc.common.zc.model.ZcEbPlan;public class ZcEbBulletinXunJiaBidEditPanel extends AbstractZcEbBulletinEditPanel {  private DateFieldEditor fieldInputDate;  public ZcEbBulletinXunJiaBidEditPanel(ZcEbBulletinXunJiaBidEditDialog parent, ListCursor listCursor, String tabStatus,  ZcEbBulletinXunJiaBidListPanel listPanel) {    super(parent, listCursor, tabStatus, listPanel, ZcEbBulletinConstants.COMPO_ZC_EB_BULLETIN_XUN_JIA_BID);  }  public String getOpiWay() {    return "'" + ZcSettingConstants.PITEM_OPIWAY_XJ + "'";  }  @Override  protected String getBulletinType() {    // TODO Auto-generated method stub    return ZcEbBulletinConstants.TYPE_BULLETIN_XUN_JIA_BID;  }  public String fetchSn(ZcEbBulletin sheet) {    List<ZcEbPack> pack = zcEbBaseServiceDelegate.queryDataForList("ZcEbProj.getZcEbPackListByProjCode", sheet.getProjCode(), requestMeta);    return pack.get(0).getEntrustCode();  }  public String getSqlMapSelectedMold() {    return "ZcEbBulletinWordMold.getZcEbBulletinWordMoldXunJiaBid";  }  protected String getCompId() {    return ZcEbBulletinConstants.COMPO_ZC_EB_BULLETIN_XUN_JIA_BID;  }  protected String getModelName() {    // TODO Auto-generated method stub    return ZcEbBulletinConstants.TITLE_ZC_EB_BULLETIN_XUN_JIA_BID;  }  protected String checkBeforePublish() {    Date curre = requestMeta.getSysDate();    ZcEbBulletin bulletin = (ZcEbBulletin) listCursor.getCurrentObject();    Date endDate = null;    List dataList = zcEbBaseServiceDelegate.queryDataForList("ZcEbPlan.getZcEbPlanByProjCode", bulletin.getProjCode(), requestMeta);    if (dataList == null || dataList.size() < 1) {      return "开标时间未确定，不允许发布！";    }    ZcEbPlan plan = (ZcEbPlan) dataList.get(0);    endDate = plan.getOpenBidTime();    if (endDate == null) {      if (fieldInputDate != null)        fieldInputDate.setEnabled(true);      return "开标截止时间为空，不允许发布！";    }    if (curre.compareTo(endDate) > 0) {      if (fieldInputDate != null)        fieldInputDate.setEnabled(true);      return "开标截止时间必须晚于当前时间发布时间！";    }    return null;  }}