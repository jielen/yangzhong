<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE sqlMap     PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      "http://ibatis.apache.org/dtd/sql-map-2.dtd"><sqlMap namespace="com.ufgov.zc.server.zc.dao.ZcEbQuestionMapper" >	<typeAlias alias="elementCondition"	type="com.ufgov.zc.common.system.dto.ElementConditionDto" />  <resultMap id="BaseResultMap" class="com.ufgov.zc.common.zc.model.ZcEbQuestion" >     <result column="ZY_CODE" property="zyCode" jdbcType="VARCHAR" />    <result column="PROJ_CODE" property="projCode" jdbcType="VARCHAR" />    <result column="ZY_UNIT" property="zyUnit" jdbcType="VARCHAR" />    <result column="ZY_DATE" property="zyDate" jdbcType="DATE" />    <result column="ZY_LINK_MAN" property="zyLinkMan" jdbcType="VARCHAR" />    <result column="ZY_LINK_TEL" property="zyLinkTel" jdbcType="VARCHAR" />    <result column="ZY_FILE" property="zyFile" jdbcType="VARCHAR" />    <result column="ZY_FILE_BLOBID" property="zyFileBlobid" jdbcType="VARCHAR" />    <result column="HY_DATE" property="hyDate" jdbcType="DATE" />    <result column="HY_FILE" property="hyFile" jdbcType="VARCHAR" />    <result column="HY_FILE_BLOBID" property="hyFileBlobid" jdbcType="VARCHAR" />    <result column="INPUTOR" property="inputor" jdbcType="VARCHAR" />    <result column="INPUT_DATE" property="inputDate" jdbcType="DATE" />    <result column="STATUS" property="status" jdbcType="VARCHAR" />    <result column="PROJ_JBR" property="projJbr" jdbcType="VARCHAR" />    <result column="PROJ_NAME" property="projName" jdbcType="VARCHAR" />    <result column="ND" property="nd" jdbcType="VARCHAR" />    <result column="PROCESS_INST_ID" property="processInstId" jdbcType="DECIMAL" />    <result column="REMARK" property="remark" jdbcType="VARCHAR" />    <result column="DANWEINAME" property="zyUnitName" jdbcType="VARCHAR" />    <result column="ZY_TYPE" property="zyType" jdbcType="VARCHAR" />  </resultMap>  <resultMap id="ResultMapWithBLOBs" class="com.ufgov.zc.common.zc.model.ZcEbQuestionWithBLOBs" extends="BaseResultMap" >        <result column="ZY_CONTENT" property="zyContent" jdbcType="CLOB" typeHandler="org.springframework.orm.ibatis.support.ClobStringTypeHandler" />    <result column="HY_CONTENT" property="hyContent" jdbcType="CLOB" typeHandler="org.springframework.orm.ibatis.support.ClobStringTypeHandler" />  </resultMap>    <resultMap id="packResultMap" class="com.ufgov.zc.common.zc.model.ZcEbQuestionPack" >      <result column="ZY_CODE" property="zyCode" jdbcType="VARCHAR" />     <result column="PACK_CODE" property="packCode" jdbcType="VARCHAR" />  	    <result column="PACK_NAME" property="packName" jdbcType="VARCHAR" />  	    <result column="PUR_CONTENT" property="packContent" jdbcType="VARCHAR" />  	  </resultMap>     <select id="selectDetail" resultMap="packResultMap" parameterClass="java.lang.String" >  	SELECT QP.*,PK.PACK_NAME,PK.PUR_CONTENT FROM ZC_EB_QUESTION_PACK QP,ZC_EB_PACK PK WHERE QP.PACK_CODE=PK.PACK_CODE and qp.zy_code=#zyCode#  </select>  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterClass="java.lang.String" >    select     ZC_EB_QUESTION.ZY_CODE, ZC_EB_QUESTION.PROJ_CODE, ZC_EB_QUESTION.ZY_UNIT, ZC_EB_QUESTION.ZY_DATE,     ZC_EB_QUESTION.ZY_LINK_MAN, ZC_EB_QUESTION.ZY_LINK_TEL, ZC_EB_QUESTION.ZY_FILE, ZC_EB_QUESTION.ZY_FILE_BLOBID,     ZC_EB_QUESTION.HY_DATE, ZC_EB_QUESTION.HY_FILE, ZC_EB_QUESTION.HY_FILE_BLOBID, ZC_EB_QUESTION.INPUTOR,     ZC_EB_QUESTION.INPUT_DATE, ZC_EB_QUESTION.STATUS, ZC_EB_QUESTION.PROJ_JBR, ZC_EB_QUESTION.PROJ_NAME,     ZC_EB_QUESTION.ND, ZC_EB_QUESTION.PROCESS_INST_ID, ZC_EB_QUESTION.REMARK,UNIT.DANWEINAME,ZC_EB_QUESTION.ZY_CONTENT, ZC_EB_QUESTION.HY_CONTENT,ZC_EB_QUESTION.ZY_TYPE    from ZC_EB_QUESTION,HUIYUAN_UNITCOMINFO UNIT		where ZC_EB_QUESTION.ZY_UNIT=UNIT.DANWEIGUID    	and ZC_EB_QUESTION.ZY_CODE = #zyCode:VARCHAR#  </select>  <select id="selectByProcessInstId" resultMap="ResultMapWithBLOBs" parameterClass="java.lang.String" >    select     ZC_EB_QUESTION.ZY_CODE, ZC_EB_QUESTION.PROJ_CODE, ZC_EB_QUESTION.ZY_UNIT, ZC_EB_QUESTION.ZY_DATE,     ZC_EB_QUESTION.ZY_LINK_MAN, ZC_EB_QUESTION.ZY_LINK_TEL, ZC_EB_QUESTION.ZY_FILE, ZC_EB_QUESTION.ZY_FILE_BLOBID,     ZC_EB_QUESTION.HY_DATE, ZC_EB_QUESTION.HY_FILE, ZC_EB_QUESTION.HY_FILE_BLOBID, ZC_EB_QUESTION.INPUTOR,     ZC_EB_QUESTION.INPUT_DATE, ZC_EB_QUESTION.STATUS, ZC_EB_QUESTION.PROJ_JBR, ZC_EB_QUESTION.PROJ_NAME,     ZC_EB_QUESTION.ND, ZC_EB_QUESTION.PROCESS_INST_ID, ZC_EB_QUESTION.REMARK,UNIT.DANWEINAME,ZC_EB_QUESTION.ZY_CONTENT, ZC_EB_QUESTION.HY_CONTENT,ZC_EB_QUESTION.ZY_TYPE    from ZC_EB_QUESTION,HUIYUAN_UNITCOMINFO UNIT		where ZC_EB_QUESTION.ZY_UNIT=UNIT.DANWEIGUID    	and ZC_EB_QUESTION.PROCESS_INST_ID = #value:VARCHAR#  </select>  <select id="selectMainDataLst" resultMap="BaseResultMap" parameterClass="elementCondition" >       select     ZC_EB_QUESTION.ZY_CODE, ZC_EB_QUESTION.PROJ_CODE, ZC_EB_QUESTION.ZY_UNIT, ZC_EB_QUESTION.ZY_DATE,     ZC_EB_QUESTION.ZY_LINK_MAN, ZC_EB_QUESTION.ZY_LINK_TEL, ZC_EB_QUESTION.ZY_FILE, ZC_EB_QUESTION.ZY_FILE_BLOBID,     ZC_EB_QUESTION.HY_DATE, ZC_EB_QUESTION.HY_FILE, ZC_EB_QUESTION.HY_FILE_BLOBID, ZC_EB_QUESTION.INPUTOR,     ZC_EB_QUESTION.INPUT_DATE, ZC_EB_QUESTION.STATUS, ZC_EB_QUESTION.PROJ_JBR, ZC_EB_QUESTION.PROJ_NAME,     ZC_EB_QUESTION.ND, ZC_EB_QUESTION.PROCESS_INST_ID, ZC_EB_QUESTION.REMARK,UNIT.DANWEINAME,ZC_EB_QUESTION.ZY_TYPE     from ZC_EB_QUESTION,HUIYUAN_UNITCOMINFO UNIT		where ZC_EB_QUESTION.ZY_UNIT=UNIT.DANWEIGUID		<isNotEqual prepend="and" compareValue="0" property="nd">			ZC_EB_QUESTION.ND = #nd#		</isNotEqual>		<include refid="BusiNumLim.BusiNumLimStr" />		<isNotNull prepend="AND" property="status">			<isEqual property="status" compareValue="todo">				exists (select				instance_id from V_WF_CURRENT_TASK_ZC_TODO where executor				=#executor# and instance_id = ZC_EB_QUESTION.process_inst_id)			</isEqual>			<isEqual property="status" compareValue="untread">				exists (select				instance_id from V_WF_CURRENT_TASK_ZC_UNTREAD where				executor				=#executor# and instance_id = ZC_EB_QUESTION.process_inst_id)			</isEqual>			<isEqual property="status" compareValue="done">				exists (select				instance_id from V_WF_ACTION_HISTORY_GK53 where executor =				#executor# and instance_id = ZC_EB_QUESTION.process_inst_id)				and				ZC_EB_QUESTION.STATUS!= 'cancel' and				ZC_EB_QUESTION.STATUS != 'exec'			</isEqual>			<isEqual property="status" compareValue="draft">				( exists (select				WF_DRAFT_NAME from as_wf_draft where				user_id=#executor# and				compo_id=#wfcompoId# and				WF_DRAFT_ID=ZC_EB_QUESTION.process_inst_id)				or				ZC_EB_QUESTION.process_inst_id = -1 )				and ZC_EB_QUESTION.STATUS ='0'			</isEqual>			<isEqual property="status" compareValue="exec">				ZC_EB_QUESTION.STATUS	='exec'			</isEqual>			<isEqual property="status" compareValue="all">				1=1			</isEqual>			<isEqual property="status" compareValue="processing">				ZC_EB_QUESTION.STATUS	not in ('0','exec','1')			</isEqual>			<isEqual property="status" compareValue="wait">				ZC_EB_QUESTION.STATUS	='1'			</isEqual>		</isNotNull>		ORDER BY ZC_EB_QUESTION.INPUT_DATE DESC  </select>  <delete id="deleteByPrimaryKey" parameterClass="java.lang.String" >    delete from ZC_EB_QUESTION    where ZY_CODE = #zyCode:VARCHAR#  </delete>  <delete id="deleteDetailByPrimaryKey" parameterClass="java.lang.String" >    delete from ZC_EB_QUESTION_PACK    where ZY_CODE = #zyCode:VARCHAR#  </delete>    <insert id="insertDetail" parameterClass="com.ufgov.zc.common.zc.model.ZcEbQuestionPack" >  	insert into ZC_EB_QUESTION_PACK (ZY_CODE, PACK_CODE) values (#zyCode:VARCHAR#, #packCode:VARCHAR#)  </insert>  <insert id="insert" parameterClass="com.ufgov.zc.common.zc.model.ZcEbQuestionWithBLOBs" >    insert into ZC_EB_QUESTION (ZY_CODE, PROJ_CODE, ZY_UNIT,       ZY_DATE, ZY_LINK_MAN, ZY_LINK_TEL,       ZY_FILE, ZY_FILE_BLOBID, HY_DATE,       HY_FILE, HY_FILE_BLOBID, INPUTOR,       INPUT_DATE, STATUS, PROJ_JBR,       PROJ_NAME, ND, PROCESS_INST_ID,       REMARK, ZY_CONTENT, HY_CONTENT,ZY_TYPE      )    values (#zyCode:VARCHAR#, #projCode:VARCHAR#, #zyUnit:VARCHAR#,       #zyDate:DATE#, #zyLinkMan:VARCHAR#, #zyLinkTel:VARCHAR#,       #zyFile:VARCHAR#, #zyFileBlobid:VARCHAR#, #hyDate:DATE#,       #hyFile:VARCHAR#, #hyFileBlobid:VARCHAR#, #inputor:VARCHAR#,       #inputDate:DATE#, #status:VARCHAR#, #projJbr:VARCHAR#,       #projName:VARCHAR#, #nd:VARCHAR#, #processInstId:DECIMAL#,       #remark:VARCHAR#, #zyContent,handler=org.springframework.orm.ibatis.support.ClobStringTypeHandler#,       #hyContent,handler=org.springframework.orm.ibatis.support.ClobStringTypeHandler#,      #zyType#      )  </insert>  <update id="updateZyDate" parameterClass="com.ufgov.zc.common.zc.model.ZcEbQuestion" >  	update ZC_EB_QUESTION    set  ZY_DATE = #zyDate:DATE#    where PROCESS_INST_ID = #processInstId:DECIMAL#  </update>  <update id="updateHyDate" parameterClass="com.ufgov.zc.common.zc.model.ZcEbQuestion" >  	update ZC_EB_QUESTION    set  HY_DATE = #hyDate:DATE#    where PROCESS_INST_ID = #processInstId:DECIMAL#    </update>  <update id="updateByPrimaryKeyWithBLOBs" parameterClass="com.ufgov.zc.common.zc.model.ZcEbQuestionWithBLOBs" >    update ZC_EB_QUESTION    set PROJ_CODE = #projCode:VARCHAR#,      ZY_UNIT = #zyUnit:VARCHAR#,      ZY_DATE = #zyDate:DATE#,      ZY_LINK_MAN = #zyLinkMan:VARCHAR#,      ZY_LINK_TEL = #zyLinkTel:VARCHAR#,      ZY_FILE = #zyFile:VARCHAR#,      ZY_FILE_BLOBID = #zyFileBlobid:VARCHAR#,      HY_DATE = #hyDate:DATE#,      HY_FILE = #hyFile:VARCHAR#,      HY_FILE_BLOBID = #hyFileBlobid:VARCHAR#,      INPUTOR = #inputor:VARCHAR#,      INPUT_DATE = #inputDate:DATE#,      STATUS = #status:VARCHAR#,      PROJ_JBR = #projJbr:VARCHAR#,      PROJ_NAME = #projName:VARCHAR#,      ND = #nd:VARCHAR#,      PROCESS_INST_ID = #processInstId:DECIMAL#,      REMARK = #remark:VARCHAR#,      ZY_CONTENT = #zyContent,handler=org.springframework.orm.ibatis.support.ClobStringTypeHandler#,      HY_CONTENT = #hyContent,handler=org.springframework.orm.ibatis.support.ClobStringTypeHandler#,      ZY_TYPE=#zyType#    where ZY_CODE = #zyCode:VARCHAR#  </update>  <update id="updateByPrimaryKey" parameterClass="com.ufgov.zc.common.zc.model.ZcEbQuestion" >     update ZC_EB_QUESTION    set PROJ_CODE = #projCode:VARCHAR#,      ZY_UNIT = #zyUnit:VARCHAR#,      ZY_DATE = #zyDate:DATE#,      ZY_LINK_MAN = #zyLinkMan:VARCHAR#,      ZY_LINK_TEL = #zyLinkTel:VARCHAR#,      ZY_FILE = #zyFile:VARCHAR#,      ZY_FILE_BLOBID = #zyFileBlobid:VARCHAR#,      HY_DATE = #hyDate:DATE#,      HY_FILE = #hyFile:VARCHAR#,      HY_FILE_BLOBID = #hyFileBlobid:VARCHAR#,      INPUTOR = #inputor:VARCHAR#,      INPUT_DATE = #inputDate:DATE#,      STATUS = #status:VARCHAR#,      PROJ_JBR = #projJbr:VARCHAR#,      PROJ_NAME = #projName:VARCHAR#,      ND = #nd:VARCHAR#,      PROCESS_INST_ID = #processInstId:DECIMAL#,      REMARK = #remark:VARCHAR#,      ZY_TYPE=#zyType#    where ZY_CODE = #zyCode:VARCHAR#  </update></sqlMap>