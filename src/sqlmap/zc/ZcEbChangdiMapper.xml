<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="com.ufgov.zc.server.zc.dao.ZcEbChangdiMapper" >
	<typeAlias alias="elementCondition" type="com.ufgov.zc.common.system.dto.ElementConditionDto" />
  <resultMap id="BaseResultMap" class="com.ufgov.zc.common.zc.model.ZcEbChangdi" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 20 01:14:19 CST 2015.
    -->
    <result column="CHANGDIGUID" property="changdiguid" jdbcType="VARCHAR" />
    <result column="CHANGDINAME" property="changdiname" jdbcType="VARCHAR" />
    <result column="RONGNAIRENSHU" property="rongnairenshu" jdbcType="INTEGER" />
    <result column="COMPUTERNUM" property="computernum" jdbcType="INTEGER" />
    <result column="TOUYINGYINUM" property="touyingyinum" jdbcType="INTEGER" />
    <result column="DIANZIBAIBANNUM" property="dianzibaibannum" jdbcType="INTEGER" />
    <result column="WIREDMICROPHONENUM" property="wiredmicrophonenum" jdbcType="INTEGER" />
    <result column="WIRELESSMICROPHONENUM" property="wirelessmicrophonenum" jdbcType="INTEGER" />
    <result column="ORGCODE" property="orgcode" jdbcType="VARCHAR" />
    <result column="CHANGDITYPE" property="changditype" jdbcType="CHAR" />
    <result column="SCALE" property="scale" jdbcType="CHAR" />
    <result column="AREA" property="area" jdbcType="DECIMAL" />
    <result column="ADDRESS" property="address" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="ISONLINEPINGBIAO" property="isonlinepingbiao" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 20 01:14:19 CST 2015.
    -->
    CHANGDIGUID, CHANGDINAME, RONGNAIRENSHU, COMPUTERNUM, TOUYINGYINUM, DIANZIBAIBANNUM, 
    WIREDMICROPHONENUM, WIRELESSMICROPHONENUM, ORGCODE, CHANGDITYPE, SCALE, AREA, ADDRESS, 
    REMARK, ISONLINEPINGBIAO, STATUS
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterClass="java.lang.String" > 
    select 
    <include refid="Base_Column_List" />
    from ZC_EB_CHANGDI
    where CHANGDIGUID = #changdiguid:VARCHAR#
  </select>
  <select id="selectMainDataLst" resultMap="BaseResultMap" parameterClass="elementCondition" > 
    select 
    <include refid="Base_Column_List" />
    from ZC_EB_CHANGDI    
	<dynamic prepend="WHERE">  
	  <isNotEmpty prepend="AND" property="status"> 
			<isEqual property="status" compareValue="enable">
	    		STATUS = #status:VARCHAR# 
	    	</isEqual>  
			<isEqual property="status" compareValue="disable">
	    		STATUS = #status:VARCHAR# 
	    	</isEqual>  
			<isEqual property="status" compareValue="all">
	    		1=1 
	    	</isEqual>    
	  </isNotEmpty>
	</dynamic>  
  </select>
  <select id="selectFreeChangdi" resultMap="BaseResultMap" parameterClass="elementCondition" > 
    select 
    <include refid="Base_Column_List" />
    from ZC_EB_CHANGDI    
	<dynamic prepend="WHERE">  
	  <!-- 获取开标场地 -->
	  <isNotEmpty prepend="AND" property="payStartDate">	  	
		 not exists(select * from  zc_eb_changdi_used d
			 where  d.changdiguid=ZC_EB_CHANGDI.CHANGDIGUID and <![CDATA[(
			 (d.startdate<=#payStartDate:TIMESTAMP# and d.enddate>=#payStartDate:TIMESTAMP#)
			 or
			 (d.startdate>=#payStartDate:TIMESTAMP# and d.enddate<=#payEndDate:TIMESTAMP#)
			 or
			 (d.startdate<=#payEndDate:TIMESTAMP# and d.enddate>=#payEndDate:TIMESTAMP#)
			 or
			 (d.startdate<=#payStartDate:TIMESTAMP# and d.enddate>=#payEndDate:TIMESTAMP#)
			 )]]>)	  
	  </isNotEmpty> 
	  <!-- 获取评标场地 -->
	  <isNotEmpty prepend="AND" property="bankStartDate">	  	
		 not exists(select * from  zc_eb_changdi_used d
			 where  d.changdiguid2=ZC_EB_CHANGDI.CHANGDIGUID and <![CDATA[(
			 (d.startdate<=#bankStartDate:TIMESTAMP# and d.enddate>=#bankStartDate:TIMESTAMP#)
			 or
			 (d.startdate>=#bankStartDate:TIMESTAMP# and d.enddate<=#bankEndDate:TIMESTAMP#)
			 or
			 (d.startdate<=#bankEndDate:TIMESTAMP# and d.enddate>=#bankEndDate:TIMESTAMP#)
			 or
			 (d.startdate<=#bankStartDate:TIMESTAMP# and d.enddate>=#bankEndDate:TIMESTAMP#)
			 )]]>)	  
	  </isNotEmpty>
	</dynamic>  
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 20 01:14:19 CST 2015.
    -->
    delete from ZC_EB_CHANGDI
    where CHANGDIGUID = #changdiguid:VARCHAR#
  </delete>
  <insert id="insert" parameterClass="com.ufgov.zc.common.zc.model.ZcEbChangdi" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 20 01:14:19 CST 2015.
    -->
    insert into ZC_EB_CHANGDI (CHANGDIGUID, CHANGDINAME, RONGNAIRENSHU, 
      COMPUTERNUM, TOUYINGYINUM, DIANZIBAIBANNUM, 
      WIREDMICROPHONENUM, WIRELESSMICROPHONENUM, 
      ORGCODE, CHANGDITYPE, SCALE, 
      AREA, ADDRESS, REMARK, 
      ISONLINEPINGBIAO, STATUS)
    values (#changdiguid:VARCHAR#, #changdiname:VARCHAR#, #rongnairenshu:DECIMAL#, 
      #computernum:DECIMAL#, #touyingyinum:DECIMAL#, #dianzibaibannum:DECIMAL#, 
      #wiredmicrophonenum:DECIMAL#, #wirelessmicrophonenum:DECIMAL#, 
      #orgcode:VARCHAR#, #changditype:CHAR#, #scale:CHAR#, 
      #area:DECIMAL#, #address:VARCHAR#, #remark:VARCHAR#, 
      #isonlinepingbiao:VARCHAR#, #status:VARCHAR#)
  </insert> 
  <update id="updateByPrimaryKey" parameterClass="com.ufgov.zc.common.zc.model.ZcEbChangdi" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 20 01:14:19 CST 2015.
    -->
    update ZC_EB_CHANGDI
    set CHANGDINAME = #changdiname:VARCHAR#,
      RONGNAIRENSHU = #rongnairenshu:DECIMAL#,
      COMPUTERNUM = #computernum:DECIMAL#,
      TOUYINGYINUM = #touyingyinum:DECIMAL#,
      DIANZIBAIBANNUM = #dianzibaibannum:DECIMAL#,
      WIREDMICROPHONENUM = #wiredmicrophonenum:DECIMAL#,
      WIRELESSMICROPHONENUM = #wirelessmicrophonenum:DECIMAL#,
      ORGCODE = #orgcode:VARCHAR#,
      CHANGDITYPE = #changditype:CHAR#,
      SCALE = #scale:CHAR#,
      AREA = #area:DECIMAL#,
      ADDRESS = #address:VARCHAR#,
      REMARK = #remark:VARCHAR#,
      ISONLINEPINGBIAO = #isonlinepingbiao:VARCHAR#,
      STATUS = #status:VARCHAR#
    where CHANGDIGUID = #changdiguid:VARCHAR#
  </update>
</sqlMap>