<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap   PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"     "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="com.ufgov.zc.server.zc.dao.HuiyuanUserMapper" >
	<typeAlias alias="elementCondition" type="com.ufgov.zc.common.system.dto.ElementConditionDto" />
  <resultMap id="BaseResultMap" class="com.ufgov.zc.common.zc.model.HuiyuanUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    <result column="USERGUID" property="userguid" jdbcType="VARCHAR" />
    <result column="DANWEIGUID" property="danweiguid" jdbcType="VARCHAR" />
    <result column="DOGNUM" property="dognum" jdbcType="VARCHAR" />
    <result column="LOGINID" property="loginid" jdbcType="VARCHAR" />
    <result column="PASSWD" property="passwd" jdbcType="VARCHAR" />
    <result column="STATUSCODE" property="statuscode" jdbcType="VARCHAR" />
    <result column="DISPLAYNAME" property="displayname" jdbcType="VARCHAR" />
    <result column="BIRTHDAY" property="birthday" jdbcType="DATE" />
    <result column="SEX" property="sex" jdbcType="VARCHAR" />
    <result column="IDCARD" property="idcard" jdbcType="VARCHAR" />
    <result column="COMPANYPHONE" property="companyphone" jdbcType="VARCHAR" />
    <result column="MOBILEPHONE" property="mobilephone" jdbcType="VARCHAR" />
    <result column="EMAIL" property="email" jdbcType="VARCHAR" />
    <result column="COMADDRESS" property="comaddress" jdbcType="VARCHAR" />
    <result column="COMZIP" property="comzip" jdbcType="VARCHAR" />
    <result column="AUDITSTATUS" property="auditstatus" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="USERTYPE" property="usertype" jdbcType="VARCHAR" />
    <result column="YXQ" property="yxq" jdbcType="DATE" />
    <result column="DEVICENUM" property="devicenum" jdbcType="VARCHAR" />
    <result column="JIAOYANNO" property="jiaoyanno" jdbcType="VARCHAR" />
    <result column="CERTYOUXIAOQI" property="certyouxiaoqi" jdbcType="DATE" />
    <result column="CERTSUBJECTKEYID" property="certsubjectkeyid" jdbcType="VARCHAR" />
    <result column="ZHENGSHUTYPE" property="zhengshutype" jdbcType="VARCHAR" />
    <result column="DANWEINAME" property="danweiname" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" class="com.ufgov.zc.common.zc.model.HuiyuanUser" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    <result column="ZHAOPIAN" property="zhaopian"  typeHandler="org.springframework.orm.ibatis.support.BlobByteArrayTypeHandler"/>
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    USERGUID, DANWEIGUID, DOGNUM, LOGINID, PASSWD, STATUSCODE, DISPLAYNAME, BIRTHDAY, 
    SEX, IDCARD, COMPANYPHONE, MOBILEPHONE, EMAIL, COMADDRESS, COMZIP, AUDITSTATUS, REMARK, 
    USERTYPE, YXQ, DEVICENUM, JIAOYANNO, CERTYOUXIAOQI, CERTSUBJECTKEYID, ZHENGSHUTYPE, 
    DANWEINAME
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    ZHAOPIAN
  </sql>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterClass="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from HUIYUAN_USER
    where USERGUID = #userguid:VARCHAR#
  </select>
  <select id="selectMainDataLst" resultMap="ResultMapWithBLOBs" parameterClass="elementCondition" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from HUIYUAN_USER
    <dynamic prepend="WHERE">  
	    <isNotNull prepend="AND" property="zcText1">
	    	DANWEIGUID=#zcText1#
	    </isNotNull>
	    <isNotNull   prepend="AND" property="zcText0"><!-- 根据ca检索用户 -->
	    	DOGNUM=#zcText0#
	    </isNotNull>
	    <isNotNull   prepend="AND" property="zcText2"><!-- 根据loginId检索用户 -->
	    	LOGINID=#zcText2#
	    </isNotNull>
	</dynamic>
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    delete from HUIYUAN_USER
    where USERGUID = #userguid:VARCHAR#
  </delete>
  <insert id="insert" parameterClass="com.ufgov.zc.common.zc.model.HuiyuanUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    insert into HUIYUAN_USER (USERGUID, DANWEIGUID, DOGNUM, 
      LOGINID, PASSWD, STATUSCODE, 
      DISPLAYNAME, BIRTHDAY, SEX, 
      IDCARD, COMPANYPHONE, MOBILEPHONE, 
      EMAIL, COMADDRESS, COMZIP, 
      AUDITSTATUS, REMARK, USERTYPE, 
      YXQ, DEVICENUM, JIAOYANNO, 
      CERTYOUXIAOQI, CERTSUBJECTKEYID, ZHENGSHUTYPE, 
      DANWEINAME, ZHAOPIAN)
    values (#userguid:VARCHAR#, #danweiguid:VARCHAR#, #dognum:VARCHAR#, 
      #loginid:VARCHAR#, #passwd:VARCHAR#, #statuscode:VARCHAR#, 
      #displayname:VARCHAR#, #birthday:DATE#, #sex:VARCHAR#, 
      #idcard:VARCHAR#, #companyphone:VARCHAR#, #mobilephone:VARCHAR#, 
      #email:VARCHAR#, #comaddress:VARCHAR#, #comzip:VARCHAR#, 
      #auditstatus:VARCHAR#, #remark:VARCHAR#, #usertype:VARCHAR#, 
      #yxq:DATE#, #devicenum:VARCHAR#, #jiaoyanno:VARCHAR#, 
      #certyouxiaoqi:DATE#, #certsubjectkeyid:VARCHAR#, #zhengshutype:VARCHAR#, 
      #danweiname:VARCHAR#, #zhaopian,handler=org.springframework.orm.ibatis.support.BlobByteArrayTypeHandler#)
  </insert>
  <update id="updateByPrimaryKeyWithBLOBs" parameterClass="com.ufgov.zc.common.zc.model.HuiyuanUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    update HUIYUAN_USER
    set DANWEIGUID = #danweiguid:VARCHAR#,
      DOGNUM = #dognum:VARCHAR#,
      LOGINID = #loginid:VARCHAR#,
      PASSWD = #passwd:VARCHAR#,
      STATUSCODE = #statuscode:VARCHAR#,
      DISPLAYNAME = #displayname:VARCHAR#,
      BIRTHDAY = #birthday:DATE#,
      SEX = #sex:VARCHAR#,
      IDCARD = #idcard:VARCHAR#,
      COMPANYPHONE = #companyphone:VARCHAR#,
      MOBILEPHONE = #mobilephone:VARCHAR#,
      EMAIL = #email:VARCHAR#,
      COMADDRESS = #comaddress:VARCHAR#,
      COMZIP = #comzip:VARCHAR#,
      AUDITSTATUS = #auditstatus:VARCHAR#,
      REMARK = #remark:VARCHAR#,
      USERTYPE = #usertype:VARCHAR#,
      YXQ = #yxq:DATE#,
      DEVICENUM = #devicenum:VARCHAR#,
      JIAOYANNO = #jiaoyanno:VARCHAR#,
      CERTYOUXIAOQI = #certyouxiaoqi:DATE#,
      CERTSUBJECTKEYID = #certsubjectkeyid:VARCHAR#,
      ZHENGSHUTYPE = #zhengshutype:VARCHAR#,
      DANWEINAME = #danweiname:VARCHAR#,
      ZHAOPIAN = #zhaopian,handler=org.springframework.orm.ibatis.support.BlobByteArrayTypeHandler#
    where USERGUID = #userguid:VARCHAR#
  </update>
  <update id="updateByPrimaryKey" parameterClass="com.ufgov.zc.common.zc.model.HuiyuanUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    update HUIYUAN_USER
    set DANWEIGUID = #danweiguid:VARCHAR#,
      DOGNUM = #dognum:VARCHAR#,
      LOGINID = #loginid:VARCHAR#,
      PASSWD = #passwd:VARCHAR#,
      STATUSCODE = #statuscode:VARCHAR#,
      DISPLAYNAME = #displayname:VARCHAR#,
      BIRTHDAY = #birthday:DATE#,
      SEX = #sex:VARCHAR#,
      IDCARD = #idcard:VARCHAR#,
      COMPANYPHONE = #companyphone:VARCHAR#,
      MOBILEPHONE = #mobilephone:VARCHAR#,
      EMAIL = #email:VARCHAR#,
      COMADDRESS = #comaddress:VARCHAR#,
      COMZIP = #comzip:VARCHAR#,
      AUDITSTATUS = #auditstatus:VARCHAR#,
      REMARK = #remark:VARCHAR#,
      USERTYPE = #usertype:VARCHAR#,
      YXQ = #yxq:DATE#,
      DEVICENUM = #devicenum:VARCHAR#,
      JIAOYANNO = #jiaoyanno:VARCHAR#,
      CERTYOUXIAOQI = #certyouxiaoqi:DATE#,
      CERTSUBJECTKEYID = #certsubjectkeyid:VARCHAR#,
      ZHENGSHUTYPE = #zhengshutype:VARCHAR#,
      DANWEINAME = #danweiname:VARCHAR#
    where USERGUID = #userguid:VARCHAR#
  </update>
  
  <select id="selectUserFunc" parameterClass="elementCondition" resultClass="java.util.HashMap">
  	select USER_ID, COMPO_ID, FUNC_ID from v_sf_user_func 
  	where 1=1
		<isNotNull prepend="AND" property="userId">
		USER_ID=#userId#
		</isNotNull> 
		<isNotNull prepend="AND" property="compoId">
		COMPO_ID=#compoId#
		</isNotNull> 
		<isNotNull prepend="AND" property="dattr1">
		COMPO_ID like #dattr1#||'%'
		</isNotNull> 	
  </select>
  <update id="updateAuditStatus" parameterClass="com.ufgov.zc.common.zc.model.HuiyuanUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    update HUIYUAN_USER
    set 
      AUDITSTATUS = #auditstatus:VARCHAR#
    where USERGUID = #userguid:VARCHAR#
  </update>
  <update id="updateUserLogin" parameterClass="java.util.HashMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 13 02:53:27 CST 2015.
    -->
    update as_emp
    set 
      IS_LOGIN = #isLogin#
    where EMP_CODE = #userGuid#
  </update>
  <update id="updateSysUser" parameterClass="java.util.HashMap" > 
    update AS_USER
    set 
      USER_NAME = #userName#
      PASSWD=#passwd#
    where user_id = #userGuid#
  </update>
  <update id="updateSysEmp" parameterClass="java.util.HashMap" > 
    update as_emp
    set 
      EMP_NAME = #userName#
      CA_SERIAL=#caSerial#
    where EMP_CODE = #userGuid#
  </update>
  <select id="getUserByCa" resultMap="ResultMapWithBLOBs" parameterClass="java.util.HashMap" > 
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from HUIYUAN_USER
    where DOGNUM = #ca#
  </select>
  <select id="getUserByLoginId" resultMap="ResultMapWithBLOBs" parameterClass="java.util.HashMap" > 
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from HUIYUAN_USER
    where LOGINID = #loginId#
  </select>
</sqlMap>