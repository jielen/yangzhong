Ext.tree.TreeCheckNodeUI=function(){this.checkModel="multiple";this.onlyLeafCheckable=false;Ext.tree.TreeCheckNodeUI.superclass.constructor.apply(this,arguments)};Ext.extend(Ext.tree.TreeCheckNodeUI,Ext.tree.TreeNodeUI,{renderElements:function(e,j,i,k){var l=e.getOwnerTree();this.checkModel=l.checkModel||this.checkModel;this.onlyLeafCheckable=l.onlyLeafCheckable||false;this.indentMarkup=e.parentNode?e.parentNode.ui.getChildIndent():"";var f=(!this.onlyLeafCheckable||j.leaf);var c=j.href?j.href:Ext.isGecko?"":"#";var d=['<li class="x-tree-node"><div ext:tree-node-id="',e.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',j.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img src="',j.icon||this.emptyIcon,'" class="x-tree-node-icon',(j.icon?" x-tree-node-inline-icon":""),(j.iconCls?" "+j.iconCls:""),'" unselectable="on" />',f?('<input class="x-tree-node-cb" type="checkbox" '+(j.checked?'checked="checked" />':"/>")):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',c,'" tabIndex="1" ',j.hrefTarget?' target="'+j.hrefTarget+'"':"",'><span unselectable="on">',e.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");var b;if(k!==true&&e.nextSibling&&(b=e.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",b,d)}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",i,d)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var h=this.elNode.childNodes;this.indentNode=h[0];this.ecNode=h[1];this.iconNode=h[2];var g=3;if(f){this.checkbox=h[3];Ext.fly(this.checkbox).on("click",this.check.createDelegate(this,[null]));g++}this.anchor=h[g];this.textNode=h[g].firstChild},check:function(f){var g=this.node;var c=g.getOwnerTree();this.checkModel=c.checkModel||this.checkModel;if(f===null){f=this.checkbox.checked}else{this.checkbox.checked=f}g.attributes.checked=f;c.fireEvent("check",g,f);if(!this.onlyLeafCheckable&&this.checkModel=="cascade"){var b=g.parentNode;if(b!==null){this.parentCheck(b,f)}if(!g.expanded&&!g.childrenRendered){g.expand(false,false,this.childCheck)}else{this.childCheck(g)}}else{if(this.checkModel=="single"){var a=c.getChecked();for(var d=0;d<a.length;d++){var e=a[d];if(e.id!=g.id){e.getUI().checkbox.checked=false;e.attributes.checked=false;c.fireEvent("check",e,false)}}}}},childCheck:function(e){var b=e.attributes;if(!b.leaf){var d=e.childNodes;var f;for(var c=0;c<d.length;c++){f=d[c].getUI();if(f.checkbox.checked^b.checked){f.check(b.checked)}}}},parentCheck:function(c,b){var d=c.getUI().checkbox;if(typeof d=="undefined"){return}if(!(b^d.checked)){return}if(!b&&this.childHasChecked(c)){return}d.checked=b;c.attributes.checked=b;c.getOwnerTree().fireEvent("check",c,b);var a=c.parentNode;if(a!==null){this.parentCheck(a,b)}},childHasChecked:function(b){var c=b.childNodes;if(c||c.length>0){for(var a=0;a<c.length;a++){if(c[a].getUI().checkbox.checked){return true}}}return false},toggleCheck:function(c){var a=this.checkbox;if(a){var b=(c===undefined?!a.checked:c);this.check(b)}}});