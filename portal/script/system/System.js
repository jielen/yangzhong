ufgov.portal.system.System=Ext.extend(ufgov.portal.Base,{createMainFrame:function(a){mainFrame=new Ext.Panel({region:"center",contentEl:"center",margins:"0 5 0 0",layout:"fit",autoScroll:false,items:new Ext.TabPanel({baseCls:"x-plain",activeTab:0,border:false,id:"mainFrame",resizeTabs:false,minTabWidth:115,tabWidth:150,enableTabScroll:true,autoScroll:true,items:[{title:"门户管理首页"}]})});new Ext.Viewport({layout:"border",items:[{region:"north",contentEl:"north",minSize:100,maxSize:150,split:true,collapsible:true,height:115},new Ext.BoxComponent({region:"south",el:"south",height:30}),{region:"west",id:"west",title:"门户系统管理导航菜单",split:true,width:180,minSize:180,maxSize:180,collapsible:false,margins:"0 0 0 5",layout:"accordion",layoutConfig:{animate:true},items:a},mainFrame]})},executiveURL:function(e){if(e.isLeaf()){if(e.attributes.url!="#"){var f=e.attributes.url;if(e.attributes.hrefTarget!="_blank"){if(f.indexOf("http://")===0){window.open(e.attributes.url,"new","")}else{var d=Ext.getCmp("mainFrame");if(!Ext.getCmp(e.attributes.id)){var a=new Ext.Panel({title:e.attributes.text,id:"",closable:true,autoLoad:{url:"dispatcher.action",params:"function="+e.attributes.id,scripts:true,text:"数据装载中，请稍候...",nocache:true}});d.add(a);d.activate(a)}else{var c=d.findById(e.attributes.id);d.activate(c)}}}else{window.open(e.attributes.url,"_blank","")}}else{if(e.attributes.hrefTarget!="_blank"){var d=Ext.getCmp("mainFrame");if(!Ext.getCmp(e.attributes.id)){var a=new Ext.Panel({title:e.attributes.text,id:e.attributes.id,closable:true,autoLoad:{url:"dispatcher.action",params:"function="+e.attributes.id,scripts:true,text:"数据装载中，请稍候...",nocache:true}});d.add(a);d.activate(a)}else{var a=d.findById(e.attributes.id);d.activate(a)}}else{var b="dispatcher.action?function="+e.attributes.id;window.open(b,"_blank","")}}}else{e.toggle()}}});System=new ufgov.portal.system.System();Ext.onReady(function(){Ext.QuickTips.init();var Menu=new ufgov.portal.common.Menu();var dataUrl="getMenuTree.action";Ext.Ajax.request({url:"getMenuTree.action",params:{menuId:"root"},success:function(response){var rootMenu=Ext.util.JSON.decode(response.responseText);var rootMenuTree=new Array();for(var i=0;i<rootMenu.length;i++){rootMenuTree[i]=Menu.createMenuTree(rootMenu[i].id,rootMenu[i].text,false,dataUrl,eval(System.executiveURL))}System.createMainFrame(rootMenuTree)}});Ext.Ajax.on("requestcomplete",function(conn,response,options){System.hideSaveProgressBar()})});